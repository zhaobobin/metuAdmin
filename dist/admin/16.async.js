(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"+cI3":function(e,t,a){"use strict";var l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var n=l(a("2/Rp"));a("P2fV");var u,i,r,d=l(a("NJEC")),o=l(a("p0pE")),c=l(a("2Taf")),p=l(a("vZ4D")),s=l(a("l4Ni")),f=l(a("ujKo")),m=l(a("MhPg")),y=l(a("q1tI")),b=a("MuoO"),h=a("7DNP"),k=l(a("wd/R")),v=l(a("YdyG")),g=l(a("pTQj")),E=(u=(0,b.connect)(function(e){var t=e.global;return{global:t}}),u((r=function(e){function t(e){var a;return(0,c.default)(this,t),a=(0,s.default)(this,(0,f.default)(t).call(this,e)),a.formCallback=function(e){a.setState({queryParams:e?(0,o.default)({},a.state.queryParams,e):{},modalVisible:!1})},a.add=function(){a.props.dispatch(h.routerRedux.push("/content/article/add"))},a.edit=function(e){a.props.dispatch(h.routerRedux.push("/content/article/edit/".concat(e)))},a.save=function(e){if(a.ajaxFlag){a.ajaxFlag=!1;var t,l,n=a.state,u=n.apiAdd,i=n.apiEdit,r=n.modalAction,d=n.modalValues;"\u6dfb\u52a0"===r?(t=u,l=e):(t=i,l=(0,o.default)({_id:d._id},e)),a.props.dispatch({type:"global/post",url:t,payload:l,callback:function(e){setTimeout(function(){a.ajaxFlag=!0},500),"0"===e.code&&(a.tableInit.refresh({}),a.setState({modalVisible:!1,modalValues:""}))}})}},a.del=function(e){if(a.ajaxFlag){a.ajaxFlag=!1;var t=a.state.apiDel;a.props.dispatch({type:"global/post",url:t,payload:{id:e},callback:function(e){setTimeout(function(){a.ajaxFlag=!0},500),"0"===e.code&&a.tableInit.refresh({})}})}},a.modalCallback=function(e){e?a.save(e):a.setState({modalVisible:!1,modalValues:""})},a.ajaxFlag=!0,a.state={queryParams:{userType:"user"},apiList:"/api/ArticleList",apiAdd:"/api/ArticleAdd",apiEdit:"/api/ArticleUpdate",apiDel:"/api/ArticleDel",modalVisible:!1,modalAction:"",modalTitle:"\u6587\u7ae0",modalValues:"",roleOptions:[]},a}return(0,m.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.global.currentUser,a=this.state,l=a.apiList,u=a.queryParams,i=a.modalTitle,r=[[{key:"title",label:"\u6807\u9898",type:"Input",inputType:"Input",value:"",placeholder:"\u8bf7\u8f93\u5165",rules:[]},{key:"username",label:"\u53d1\u5e03\u7528\u6237",type:"Input",inputType:"Input",value:"",placeholder:"\u8bf7\u8f93\u5165",rules:[]},{key:"tag",label:"\u6807\u7b7e",type:"Input",value:"",placeholder:"\u8bf7\u8f93\u5165",rules:[]}],[{key:"create_time",label:"\u53d1\u5e03\u65f6\u95f4",type:"DatePicker",value:"",placeholder:"\u8bf7\u9009\u62e9",rules:[]},{key:"status",label:"\u72b6\u6001",type:"Select",value:"",placeholder:"\u8bf7\u9009\u62e9",option:[{label:"\u672a\u901a\u8fc7",value:0},{label:"\u5df2\u901a\u8fc7",value:1}]},{key:"btn",type:"BtnGroup",btns:[{name:"\u67e5\u8be2",type:"primary",htmlType:"submit"},{name:"\u91cd\u7f6e",type:"default",htmlType:"reset"}]}]],o=[{title:"\u6807\u9898",dataIndex:"title",key:"title",align:"center"},{title:"\u6807\u7b7e",dataIndex:"tags",key:"tags",align:"center"},{title:"\u53d1\u5e03\u65f6\u95f4",dataIndex:"createtime",key:"createtime",align:"center",render:function(e){return y.default.createElement("span",null,(0,k.default)(e).format("YYYY-MM-DD"))}},{title:"\u4f5c\u8005",dataIndex:"uid",key:"uid",align:"center",render:function(e){return y.default.createElement("span",null,e.nickname)}},{title:"\u72b6\u6001",dataIndex:"status",key:"status",align:"center",render:function(e){return y.default.createElement("span",null,e?"\u5df2\u901a\u8fc7":"\u672a\u901a\u8fc7")}},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",align:"center",render:function(a,l){return y.default.createElement("div",null,"admin"===t.userType?y.default.createElement("span",null,y.default.createElement("a",{onClick:function(){return e.edit(l._id)}},"\u7f16\u8f91"),"admin"===l.user_name?null:y.default.createElement("span",null," | "),"admin"===l.username?null:y.default.createElement(d.default,{title:"\u786e\u5b9a\u5220\u9664\u8be5".concat(i,"\uff1f"),onConfirm:function(){return e.del(l._id)}},y.default.createElement("a",null,"\u5220\u9664"))):"--")}}];return y.default.createElement("div",null,y.default.createElement(v.default,{layout:"horizontal",params:r,callback:this.formCallback}),"admin"===t.userType?y.default.createElement("div",{style:{padding:"20px 0"}},y.default.createElement(n.default,{type:"primary",onClick:this.add},"\u6dfb\u52a0",i)):null,y.default.createElement(g.default,{onRef:function(t){return e.tableInit=t},params:{api:l,columns:o,queryParams:u}}))}}]),t}(y.default.Component),i=r))||i);t.default=E}}]);